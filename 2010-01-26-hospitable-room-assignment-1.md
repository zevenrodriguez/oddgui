---
title: Hospitable Room - Assignment 1
slug: hospitable-room-assignment-1
date_published: 2010-01-26T13:07:42.000Z
date_updated:   2014-03-29T23:39:28.000Z
---



So tracking the red color of the iphone red light from the flashlight app, this code moves the cursor(the cow) around,

![](uploads/assignment1.jpg)

<div id="_mcePaste"><div id="_mcePaste">import processing.video.Capture;</div><div id="_mcePaste">Capture video;// regular processing libary</div><div id="_mcePaste">PFont f;</div><div id="_mcePaste">int threshold = 150; //255 is white, 0 is black</div><div id="_mcePaste">int aveX, aveY; //this is what we are trying to find</div><div id="_mcePaste">int objectR =255;</div><div id="_mcePaste">int objectG = 0;</div><div id="_mcePaste">int objectB = 0;</div><div id="_mcePaste">boolean debug = true;</div><div id="_mcePaste">int lastTime, ellapsedTime; //for checking performance</div><div id="_mcePaste">PImage cow;</div><div id="_mcePaste">PImage grass;</div><div id="_mcePaste">String message;</div><div id="_mcePaste">void setup() {</div><div id="_mcePaste">size(640, 480);</div><div id="_mcePaste">println(Capture.list());</div><div id="_mcePaste">video = new Capture(this,width,height);</div><div id="_mcePaste">//video.settings();</div><div id="_mcePaste">cow = loadImage(“cowsmall.png”);</div><div id="_mcePaste">grass = loadImage(“grass.png”);</div><div id="_mcePaste">f = createFont(“Arial”, 32);</div><div id="_mcePaste">}</div><div id="_mcePaste">void draw(){</div><div id="_mcePaste">if (video.available()){</div><div id="_mcePaste">ellapsedTime = millis() – lastTime; Â //find time since last time, only print it out if you press “t”</div><div id="_mcePaste">lastTime = millis(); Â //reset timer for checking time next fram</div><div id="_mcePaste">video.read();</div><div id="_mcePaste">int totalFoundPixels= 0; Â //we are going to find the average location of change pixes so</div><div id="_mcePaste">int sumX = 0; Â //we will need the sum of all the x find, the sum of all the y find and the total finds</div><div id="_mcePaste">int sumY = 0;</div><div id="_mcePaste">//enter into the classic nested for statements of computer vision</div><div id="_mcePaste">for (int row = 0; row < video.height; row++) {</div><div id="_mcePaste">for (int col = 0; col < video.width; col++) {</div><div id="_mcePaste">//the pixels file into the room long line you use this simple formula to find what row and column the sit in</div><div id="_mcePaste">int offset = row * width + col;</div><div id="_mcePaste">//pull out the same pixel from the current frame</div><div id="_mcePaste">int thisColor = video.pixels[offset];</div><div id="_mcePaste">//pull out the individual colors for both pixels</div><div id="_mcePaste">float r = red(thisColor);</div><div id="_mcePaste">float g = green(thisColor);</div><div id="_mcePaste">float b = blue(thisColor);</div><div id="_mcePaste">//in a color “space” you find the distance between color the same whay you would in a cartesian space, phythag or dist in processing</div><div id="_mcePaste">float diff = dist(r, g, b, objectR, objectG, objectB);</div><div id="_mcePaste">if (diff < threshold) { Â //if it is close enough in size, add it to the average</div><div id="_mcePaste">sumX = sumX + col;</div><div id="_mcePaste">sumY= sumY + row;</div><div id="_mcePaste">totalFoundPixels++;</div><div id="_mcePaste">if (debug) video.pixels[offset] = 0xff000000;//debugging</div><div id="_mcePaste">}</div><div id="_mcePaste">}</div><div id="_mcePaste">}</div><div id="_mcePaste">// look here</div><div id="_mcePaste">if (debug){</div><div id="_mcePaste">image(video,0,0);</div><div id="_mcePaste">}</div><div id="_mcePaste">image(grass, 0,0);</div><div id="_mcePaste">if (totalFoundPixels > 0){</div><div id="_mcePaste">aveX = sumX/totalFoundPixels;</div><div id="_mcePaste">aveY = sumY/totalFoundPixels;</div><div id="_mcePaste">// noStroke();</div><div id="_mcePaste">// fill(255 , 200,200);</div><div id="_mcePaste">// ellipse(aveX-10,(aveY-10),20,20);</div><div id="_mcePaste">image(cow,aveX-10,aveY-10);</div><div id="_mcePaste">}</div><div id="_mcePaste">}</div><div id="_mcePaste">// This is how to get a hot area</div><div id="_mcePaste">if(aveX > 450 && aveX < 650 && aveY >300 && aveY < 470){</div><div id="_mcePaste">// Â noStroke();</div><div id="_mcePaste">// Â fill(255,0,0);</div><div id="_mcePaste">// Â ellipse(100,100,100,100);</div><div id="_mcePaste">message = “The cow jumped over the moon”;</div><div id="_mcePaste">textFont(f);</div><div id="_mcePaste">text(message, 75,75);</div><div id="_mcePaste">}</div><div id="_mcePaste">else{</div><div id="_mcePaste">message = ” “;</div><div id="_mcePaste">textFont(f);</div><div id="_mcePaste">text(message, 75,75);</div><div id="_mcePaste">}</div><div id="_mcePaste">}</div><div id="_mcePaste">void mousePressed(){</div><div id="_mcePaste">//if they click, use that picture for the new thing to follow</div><div id="_mcePaste">int offset = mouseY * width + mouseX;</div><div id="_mcePaste">//pull out the same pixel from the current frame</div><div id="_mcePaste">int thisColor = video.pixels[offset];</div><div id="_mcePaste">//pull out the individual colors for both pixels</div><div id="_mcePaste">float objectR = red(thisColor);</div><div id="_mcePaste">float objectG = green(thisColor);</div><div id="_mcePaste">float objectB = blue(thisColor);</div><div id="_mcePaste">println(“Chasing new color Â ” + objectR + ” ” + objectG + ” ” + objectB);</div><div id="_mcePaste">}</div><div id="_mcePaste">void keyPressed() {</div><div id="_mcePaste">//for adjusting things on the fly</div><div id="_mcePaste">if (key == ‘s’) {</div><div id="_mcePaste">video.settings();</div><div id="_mcePaste">}</div><div id="_mcePaste">else if (key == ‘-‘) {</div><div id="_mcePaste">threshold–;</div><div id="_mcePaste">println(“Threshold ” + threshold);</div><div id="_mcePaste">}</div><div id="_mcePaste">else if (key == ‘=’) {</div><div id="_mcePaste">threshold++;</div><div id="_mcePaste">println(“Threshold ” + threshold);</div><div id="_mcePaste">}</div><div id="_mcePaste">else if (key == ‘d’) {</div><div id="_mcePaste">background(255);</div><div id="_mcePaste">debug = !debug;</div><div id="_mcePaste">println(“Debug ” + debug);</div><div id="_mcePaste">}</div><div id="_mcePaste">else if (key == ‘t’) {</div><div id="_mcePaste">println(“Time Between Frames ” + ellapsedTime);</div><div id="_mcePaste">}</div><div id="_mcePaste">}</div></div>
